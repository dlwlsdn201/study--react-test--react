# :mag: í…ŒìŠ¤íŒ…ì„ í•˜ëŠ” ì´ìœ ?

## ì™œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ TEST í•´ì•¼ í• ê¹Œ? 

â†’ ê°„ë‹¨í•˜ê²Œ ë” ì•ˆì •ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì¤˜ì•¼ ë” ì•ˆì •ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

## í…ŒìŠ¤íŒ…ìœ¼ë¡œ ì–»ëŠ” ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ?

1. `ë””ë²„ê¹… ì‹œê°„ì„ ë‹¨ì¶•`í•  ìˆ˜ ìˆë‹¤.
    
    â†’ ë§Œì•½ ë°ì´í„°ê°€ ì˜ëª» ë‚˜ì™”ë‹¤ë©´ ê·¸ê²ƒì´ UIì˜ ë¬¸ì œì¸ì§€ DBì˜ ë¬¸ì œì¸ì§€ ë“±.. ì „ë¶€ ì‚¬ìš©ìê°€ ì§ì ‘ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì°¾ì•„ì•¼ í•˜ëŠ”ë° ë§Œì•½ í…ŒìŠ¤íŠ¸ í™˜ê²½ì´ êµ¬ì¶•ë˜ì–´ ìˆë‹¤ë©´, ìë™í™” ëœ Unit Testingìœ¼ë¡œ íŠ¹ì • ë²„ê·¸ë¥¼ ì‰½ê²Œ ì°¾ì•„ ë‚¼ ìˆ˜ ìˆë‹¤.
    
2. `ë”ìš± ì•ˆì •ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜`ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
    
    â†’ ë§ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ í•¨ê»˜ ì‘ì„±ëœ ì½”ë“œì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë˜ê¸° ë•Œë¬¸ì— í›¨ì”¬ ì•ˆì •ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
    
3. ê·¸ ì™¸ `ì¬ì„¤ê³„ ì‹œê°„ì˜ ë‹¨ì¶•`, ê¸°ëŠ¥ ì¶”ê°€ ë° ê³ ë„í™”ê°€ í•„ìš”í•  ë•Œ `ë”ìš± ìš©ì´í•˜ê²Œ ì‘ì—…` ê°€ëŠ¥

# :mag: React Testing Library ë€ ?

â†’ *React Component ë¥¼ Test í•˜ëŠ” ê°€ë²¼ìš´ ì†”ë£¨ì…˜!*

React Testing LibraryëŠ” React êµ¬ì„± ìš”ì†Œ ì‘ì—…ì„ ìœ„í•œ APIë¥¼ ì¶”ê°€í•˜ì—¬ DOM  Testing Library ìœ„ì— êµ¬ì¶•ëœë‹¤.

DOM Testing Libraryë€ DOM Node ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ë§¤ìš° ê°€ë²¼ìš´ ì†”ë£¨ì…˜ì´ë‹¤.

Create React App ìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” ì¦‰ì‹œ React Testing Libraryë¥¼ ì§€ì›í•˜ëŠ”ë°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ npmì„ í†µí•´ ë”°ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.

```bash
$npm install --save-dev @testing-library/react
```

> ### Enzyme

â†’ êµ¬í˜„ ì£¼ë„ í…ŒìŠ¤íŠ¸

> ### React Testing Library

â†’ í–‰ìœ„ ì£¼ë„ í…ŒìŠ¤íŠ¸

# :mag: Jestë€?

â†’ Facebook ì—ì„œ ê°œë°œí•œ `ìë°”ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬`.
ìµœì†Œí•œì˜ ì„¤ì •ìœ¼ë¡œ ë™ì‘í•˜ë©´  Test case ë¥¼ ë§Œë“¤ì–´ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ ê²€ì‚¬í•´ì¤€ë‹¤.
ì£¼ë¡œ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**ë¥¼ ìœ„í•´ ì‚¬ìš©í•œë‹¤.

## í™˜ê²½ ì„¸íŒ…

> ### ì„¤ì¹˜

```bash
# yarn íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•  ê²½ìš°
$yarn add jest --dev

# npm íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•  ê²½ìš°
$npm install jest --save-dev
```

> ### ìŠ¤í¬ë¦½íŠ¸

```json
// package.json
{
  "scripts": {
    "test": "jest", // ë˜ëŠ” "jest --watchAll" 
   },
}
```

> ### í…ŒìŠ¤íŠ¸ íŒŒì¼ ë””ë ‰í„°ë¦¬

```bash
# í”„ë¡œì íŠ¸ í´ë” (root)

test/
	integration/ # í†µí•© í…ŒìŠ¤íŠ¸ íŒŒì¼ í´ë”
		- products.int.test.js
	unit/ # ìœ ë‹› í…ŒìŠ¤íŠ¸ íŒŒì¼ í´ë”
		- products.test.js
```

![image](https://user-images.githubusercontent.com/53039583/208230640-2c8e585e-969b-43a9-822e-9832847a488d.png)

![image](https://user-images.githubusercontent.com/53039583/208230646-60ef14bc-3f8c-4de4-81ad-c7f78e162ecf.png)

## ë¬¸ë²•
> ### í…ŒìŠ¤íŠ¸ íŒŒì¼ ì½”ë“œ êµ¬ì¡°

![image](https://user-images.githubusercontent.com/53039583/208230654-6156e9ce-048d-4d90-8d93-1d0e560d70b0.png)

- `describe` : ì—¬ëŸ¬ ê´€ë ¨ í…ŒìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•˜ëŠ” ë¸”ë¡ì„ ë§Œë“ ë‹¤. (ex_ ê³¼ì¼)
- `it` : ê°œë³„ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³³. ê° testë¥¼ ì‘ì€ ë¬¸ì¥ì²˜ëŸ¼ ì„¤ëª…í•œë‹¤. (ex_ ë°”ë‚˜ë‚˜)
- `test`
    - `test.skip()` : í•´ë‹¹ test() êµ¬ë¬¸ì€ skip í•˜ê³  ë‹¤ìŒ test êµ¬ë¬¸ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.
    - `test.only()` : í•´ë‹¹ test() êµ¬ë¬¸ë§Œ ì‹¤í–‰í•œë‹¤. (ë‚˜ë¨¸ì§€ testêµ¬ë¬¸ì€ skip).
- `expect` : ê°’ì„ í…ŒìŠ¤íŠ¸í•  ë•Œë§ˆë‹¤ ì‚¬ìš©ëœë‹¤. ê·¸ë¦¬ê³  expect  í•¨ìˆ˜ í˜¼ìì„œëŠ” ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•Šê³ , **matcher ì™€ í•¨ê»˜ ì‚¬ìš©ëœë‹¤.**
- `matcher` : expect ì— ëŒ€í•œ ê²°ê³¼ ë„ì¶œì„ ìœ„í•´ í…ŒìŠ¤íŠ¸ ë°©ì‹ì„ ì •ì˜í•˜ëŠ” í•¨ìˆ˜
  - `.toHaveStyle()` : íŠ¹ì • Dom Element ìš”ì†Œì— ëŒ€í•œ style ì†ì„±ê°’ ì—¬ë¶€ í…ŒìŠ¤íŠ¸
  - `.toBeDisabled()` : íŠ¹ì • Dom Element ìš”ì†Œì— ëŒ€í•œ disabled ì†ì„±ê°’ í…ŒìŠ¤íŠ¸
  - `.toHaveTextContent()` : íŠ¹ì • Dom Element ìš”ì†Œì˜ textContent ì— ëŒ€í•œ ê°’ í…ŒìŠ¤íŠ¸
  - `.toBeTruthy()` : expect ì¸ìŠ¤í„´ìŠ¤ return ì´ true ì¸ì§€ ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸ 
  <br/>( false ì¸ ê²½ìš° : **false | 0 | '' | null | undefined | NaN** )
  - `.toEqual(VALUE)` : expect ì¸ìŠ¤í„´ìŠ¤ return ê°’ê³¼ `VALUE` ê°’ì´ ë™ì¼í•œì§€ ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸
    
    ![image](https://user-images.githubusercontent.com/53039583/208230671-9ad88ea7-e64a-47b5-81ed-df3c11ee1992.png)
    
    ![image](https://user-images.githubusercontent.com/53039583/208230675-d605612c-7d37-4d17-904c-39f86b2e407e.png)
    
    ![image](https://user-images.githubusercontent.com/53039583/208230678-7292641b-4055-458b-89b7-c552452b769d.png)
    
- `render()` : DOMì— ì»´í¬ë„ŒíŠ¸ë¥¼ rendering í•˜ëŠ” í•¨ìˆ˜. ì¸ì í˜•ì‹ì€ **react component**.
- `fireEvent` : DOM Element ì— ëŒ€í•œ **ì´ë²¤íŠ¸**ë¥¼ ì œì–´í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤
    - `.click()` : DOM Element ì— í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒì‹œí‚´
- `userEvent` : fireEvent ì™€ ë¹„ìŠ·í•˜ë©°, DOM ìš”ì†Œì— ëŒ€í•œ focus ì´ë²¤íŠ¸ë„ ë°œìƒì‹œí‚¨ë‹¤. (fireEvent ë³´ë‹¤ ë”ìš± ì‹ ë¢°ì„±ì´ ë†’ìŒ)

>### userEvent
â†’ userEventëŠ” fireEventë¥¼ ì°¸ì¡°í•˜ì—¬ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, DOM ìš”ì†Œ íƒ€ì…ì— ë”°ë¼ ê·¸ DOM ìš”ì†Œì— ë§ëŠ” ë”ìš± ì ì ˆí•œ ë°˜ì‘ì„ ë³´ì—¬ì¤€ë‹¤. 
ì˜ˆë¥¼ ë“¤ì–´ fireEvent ë¡œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ (`fireEvent.click(button)`) í´ë¦­ì€ ë˜ì§€ë§Œ í•´ë‹¹ ë²„íŠ¼ì— focus ì´ë²¤íŠ¸ëŠ” ë°œìƒë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ, userEventìœ¼ë¡œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ (`userEvent.click(button)`) ë²„íŠ¼ì— focus ì´ë²¤íŠ¸ê°€ ë°œìƒí•œë‹¤. <br/>
ë”°ë¼ì„œ, userEvent ëŠ” ì‹¤ì œ ì‚¬ìš©ìê°€ UIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì€ ì´ë²¤íŠ¸ë“¤ì„ ë””í…Œì¼í•˜ê²Œ í‘œí˜„í•´ì¤€ë‹¤.

ì‚¬ìš© ì¶”ì²œ ìˆœìœ„ : ***userEvent > fireEvent***

> ### userEvent.clear()

input ì´ë‚˜ textareaì— `í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•œ í›„ ì œê±°`í•´ì¤€ë‹¤.

ë§Œì•½ í˜„ì¬ ì†ŒìŠ¤ ì½”ë“œë³´ë‹¤ ìœ„ì—ì„œ ê°™ì€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ìœ„í•œ `userEvent` ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ `clear` í•´ì¤€ í›„ì—  `userEvent.type()`ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤.
#

## React Testing Library  ì™€ Jest ì˜ ë¹„êµ

â†’ React Testing Library ì™€ëŠ” ë‹¤ë¥¸ ê°œë…ì´ê¸° ë•Œë¬¸ì— ë³´í†µ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.

- `Jest` : Test runner ì´ë‹¤.
- `React Testing Library(RTL)` : Test runner ë¥¼ ìœ„í•œ ê³µê°„ (Virtual DOM) ì„ ì œê³µí•œë‹¤.

> ### ì˜ˆì‹œ

â†’ example ì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ê¸°ëŠ¥ì´ ë™ì‘í•˜ëŠ” ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ìƒí™©ì¼ ë•Œ

- example ì»´í¬ë„ŒíŠ¸ë¥¼ rendering í•˜ê³  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë²„íŠ¼ì„ ì°¾ëŠ” ê²ƒ â†’ `RTL` ì˜ ì—­í• 
- ë²„íŠ¼ì˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒ â†’ `jest` ì˜ ì—­í• 

# :mag:DOM (Document Object Model)

- `Document`: ë¬¸ì„œ
- `Object`: ê°ì²´
- `Model`: ëª¨ë¸

## DOM ì´ë€?

â†’**DOM(ë¬¸ì„œ ê°ì²´ ëª¨ë¸)** ì€ XML, HTML ë¬¸ì„œì˜ ê° í•­ëª©ì„ ê³„ì¸µìœ¼ë¡œ í‘œí˜„í•˜ì—¬ ìƒì„±, ë³€í˜• ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ì¦‰, í•œë§ˆë””ë¡œ `HTML ìš”ì†Œë“¤ì˜ êµ¬ì¡°í™”ëœ í‘œí˜„`ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

## DOM ì˜ íŠ¹ì„±

- DOMì€ HTMLë¬¸ì„œì˜ ë‚´ìš©ê³¼ êµ¬ì¡°ê°€ `ê°ì²´ ëª¨ë¸` ë¡œ ë³€í™”ë˜ì–´ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
- HTMLê³¼ëŠ” ë‹¤ë¥´ê²Œ DOMì€ JSì— ì˜í•´ ìˆ˜ì •ë  ìˆ˜ ìˆë‹¤.

# :mag:ì›¹í˜ì´ì§€ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ (CRP; Critical Rendering Path)

â†’ **ë¸Œë¼ìš°ì €**ê°€ **ì„œë²„**ì—ì„œ í˜ì´ì§€ì— ëŒ€í•œ HTML ì‘ë‹µì„ ë°›ê³  í™”ë©´ì— í‘œì‹œí•˜ê¸° ì „ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ìˆë‹¤.

## í”„ë¡œì„¸ìŠ¤ ìˆœì„œ
> ![image](https://user-images.githubusercontent.com/53039583/207474746-3378fe8b-1fb8-4181-ab24-d89f4d876425.png)
1. `(HTML, CSS) + JS` â†’ ë¬¸ì„œë¥¼ ì½ì–´ë“¤ì—¬ì„œ Parsing í•˜ê³  ì–´ë–¤ ë‚´ìš©ì„ pageì— rendering í•  ì§€ ê²°ì •í•œë‹¤.
2. `Render Tree` â†’ ë¸Œë¼ìš°ì €ê°€ `DOM`ê³¼ `CSSOM`ì„ ê²°í•©í•˜ê³  í™”ë©´ì— ë³´ì´ëŠ” ëª¨ë“  ë‚´ìš©ê³¼ style ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ìµœì¢… **rendering tree** ë¥¼ ì¶œë ¥í•œë‹¤. ì¦‰, **í™”ë©´ì— í‘œì‹œë˜ëŠ” ëª¨ë“  ë…¸ë“œì˜ ì½˜í…ì¸  ë° ìŠ¤íƒ€ì¼ ì •ë³´ë¥¼ í¬í•¨í•œë‹¤.**
3. `Layout` â†’  ë¸Œë¼ìš°ì €ê°€ pageì— í‘œì‹œë˜ëŠ” ê° ìš”ì†Œì˜ `í¬ê¸°`, `ìœ„ì¹˜` ë¥¼ ê³„ì‚°í•˜ëŠ” ë‹¨ê³„ì´ë‹¤.
4. `Paint` â†’ í˜ì¸íŠ¸ ë‹¨ê³„ì— ë„ë‹¬í•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” `layout ê²°ê³¼`ë¥¼ ì„ íƒí•˜ê³  `pixel`ì„ í™”ë©´ì— í˜ì¸íŠ¸ í•œë‹¤.
> ![image](https://user-images.githubusercontent.com/53039583/207474810-1579e1fd-3046-432f-b925-49a884a440cf.png)

# :mag: react app í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°

## ì¼ë°˜ì ì¸ ìƒì„±

> ### `npm` íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ìƒì„±

```bash
$npm install create-react-app <í”„ë¡œì íŠ¸ëª…>

# ë¡œì»¬ì— ì „ì—­ì ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ í•˜ê³  ì‹¶ì€ ê²½ìš°
$npm install -g create-react-app <í”„ë¡œì íŠ¸ëª…>
```

> ### `yarn`  íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ìƒì„±

```bash
$yarn add create-react-app <í”„ë¡œì íŠ¸ëª…>

# ë¡œì»¬ì— ì „ì—­ì ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ í•˜ê³  ì‹¶ì€ ê²½ìš°
$yarn add global create-react-app <í”„ë¡œì íŠ¸ëª…>

```

## Disk ê³µê°„ì„ ë‚­ë¹„í•˜ì§€ ì•Šê³  í•­ìƒ ìµœì‹  ë²„ì „ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‹¶ì€ ê²½ìš°

> ### `npx` íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ìƒì„±

- npxëŠ” npm registryì—ì„œ `íŒ¨í‚¤ì§€`  ë°ì´í„°ë¥¼ ì°¾ì•„ `ë‹¤ìš´ë¡œë“œ ì—†ì´ ë°”ë¡œ ì‹¤í–‰` ì‹œì¼œì¤€ë‹¤.

```bash
$npx create-react-app <í”„ë¡œì íŠ¸ í´ë”ëª…>
```

# :mag: ì¿¼ë¦¬ í•¨ìˆ˜

â†’ í˜ì´ì§€ì—ì„œ DOM ìš”ì†Œë¥¼ ì°¾ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ë°©ë²•.

- `get-`
- `find-`
- `query-`

![image](https://user-images.githubusercontent.com/53039583/208232230-7ce73237-feac-4477-8c2d-c12180933def.png)

## getBy-

â†’ ì¿¼ë¦¬ì— ëŒ€í•´ ì¼ì¹˜í•˜ëŠ” ë…¸ë“œë¥¼ return í•˜ë©°, ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ì—†ê±°ë‚˜ ë‘˜ ì´ìƒì˜ ì¼ì¹˜ ê²°ê³¼ê°€ ë°œê²¬ë˜ë©´ ì„¤ëª… ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚´.
(ë‘˜ ì´ìƒì˜ ìš”ì†Œê°€ ì˜ˆìƒë˜ëŠ” ê²½ìš°, `getAllBy`ì„ ì‚¬ìš©)
- ì¶”ì²œ ì‚¬ìš© ìš°ì„ ìˆœìœ„
    
    
    | 1ìˆœìœ„ (Queries Accessible to Everyone) | getByRole |
    | --- | --- |
    |  | getByLabelText |
    |  | getByPlaceholderText |
    |  | getByText |
    |  | getByDisplayValue |
    | 2ìˆœìœ„ (Sementic Queries) | getByAltText |
    |  | getByTitle |
    | 3ìˆœìœ„ (Test IDs) | getByTestId |
    - **getByTestId** ì˜ ì¶”ì²œ ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì´ìœ ?
      <br/> 
      â†’ ì¼ë°˜ ì‚¬ìš©ìë“¤ì€ Test IDë¥¼ ë³¼ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ ì¿¼ë¦¬ë¬¸ì€ í…ŒìŠ¤íŠ¸ ì‹œ, **role / text ë“±ì˜ ìš”ì†Œë“¤ì„ ë§¤ì¹­ì‹œí‚¬ ìˆ˜ ì—†ì„ ê²½ìš°ì—ë§Œ ìµœí›„ì˜ ìˆ˜ë‹¨**ìœ¼ë¡œ ì‹œìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.

> ### getByRole()
  - `button`, `checkbox`, `gridcell`, `link`, `menuitem`, `menuitemcheckbox`, `menuitemradio` ë“±

    ```jsx
    // role='button' ì´ê³ , name ì†ì„±ì´ ëŒ€ì†Œë¬¸ì ìƒê´€ì—†ì´ 'submit' ì¸ DOM Element 
    const testElement = getByRole('button', {name: /submit/i})
    ```

## queryBy-
â†’ ì¿¼ë¦¬ì— ëŒ€í•´ ì¼ì¹˜í•˜ëŠ” ë…¸ë“œë¥¼ return  í•˜ë©°, ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ì—†ìœ¼ë©´ `null`ì„ ë°˜í™˜í•˜ê³  ë‘˜ ì´ìƒì˜ ì¼ì¹˜ í•­ëª©ì´ ë°œê²¬ë˜ë©´ ì„¤ëª… ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚´.
(ë‘˜ ì´ìƒì˜ ì¼ì¹˜ í•­ëª©ì´ ì˜ˆìƒë˜ëŠ” ê²½ìš°, `queryAllBy`ì„ ì‚¬ìš©)

## findBy-
â†’ `get-` + `wait`  = `find-`

â†’ ì£¼ì–´ì§„ ì¿¼ë¦¬ì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ë°œê²¬ë˜ë©´ `Promise`ë¥¼ return í•˜ë©°, ìš”ì†Œê°€ ë°œê²¬ë˜ì§€ ì•Šê±°ë‚˜ ê¸°ë³¸ ì œí•œ ì‹œê°„ì¸ 1000ms í›„ì— ë‘˜ ì´ìƒì˜ ìš”ì†Œê°€ ë°œê²¬ë˜ë©´ Promise  ê°€ ê±°ë¶€ëœë‹¤. 
(ë‘˜ ì´ìƒì˜ ìš”ì†Œë¥¼ find í•´ì•¼ í•˜ëŠ” ê²½ìš°,  `findAllBy`ì„ ì‚¬ìš©)

## waitFor
â†’ ì¼ì • ê¸°ê°„ ë™ì•ˆ ê¸°ë‹¤ë ¤ì•¼ í•  ë•Œ, expect() ê°€ í†µê³¼í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆë‹¤.


## waitForElementToBeRemoved
â†’ `íŠ¹ì • ìš”ì†Œê°€ DOMì—ì„œ ì œê±°ë˜ê¸° ê¹Œì§€ ê¸°ë‹¤ë¦¼`.

â†’ ì˜ˆì‹œë¡œ ë°ì´í„°ë¥¼ ì†¡/ìˆ˜ì‹  ì¤‘ì¼ ë•Œ Loading UIê°€ DOM ì—ì„œ ì‚¬ë¼ì§€ê¸° ì „ê¹Œì§€ íŠ¹ì •í•œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŒ


# Prettier ì„¤ì¹˜ ë° ì„¤ì •

## ì„¤ì¹˜

> ### npm ìœ¼ë¡œ ì„¤ì¹˜

â†’ ì—¬ëŸ¬ ê°œë°œìì™€ ê°™ì€ í¬ë§· ìœ ì§€ì— ë” ì¢‹ìŒ

```bash
$yarn add prettier
```

> ### vsCode ìµìŠ¤í…ì…˜ìœ¼ë¡œ ì„¤ì¹˜

â†’ í˜¼ì í¸í•˜ê²Œ ì„¤ì¹˜í•´ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ìŒ

![image](https://user-images.githubusercontent.com/53039583/210188927-efb91c42-4a90-4456-bddd-d1b947b3251d.png)


# í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD; Test Driven Development)

## TDD(í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ) ë€?

â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì‹œ, í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì„ ì„ í–‰í•œ í›„ ì‹¤ì œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê°œë°œ ë°©ì‹.

![image](https://user-images.githubusercontent.com/53039583/210188930-9895a121-7a00-4545-8cd1-1fd195047ad9.png)


## TDDì˜ ì¥ì 

- ì‹¤ì œ êµ¬í˜„í•  ëª¨ë“  ê¸°ëŠ¥ë“¤ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ë•Œë¬¸ì— ì†ŒìŠ¤ ì½”ë“œì— **ì•ˆì •ê°**ì´ ë¶€ì—¬ë¨.
- **ë””ë²„ê¹… ì‹œê°„ â‡©**,**ì‹¤ì œ ê°œë°œ ì‹œê°„ â‡©** (ì‹¤ì œ ê°œë°œí•˜ë©´ì„œ ë””ë²„ê¹… ë¶€ë¶„ì— ëŒ€ë¶€ë¶„ ì‹œê°„ì´ ì†Œìš”ë¨.)
- ì†ŒìŠ¤ ì½”ë“œ í•˜ë‚˜í•˜ë‚˜ë¥¼ ë”ìš± ì‹ ì¤‘í•˜ê²Œ ì§¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— **ê¹¨ë—í•˜ê³  ëª…í™•í•œ ì½”ë“œ**ê°€ ì‘ì„±ë  í™•ë¥  â‡§

## (ì‹¤ìŠµ1) TDD ë¥¼ ì ìš©í•˜ì—¬ ê°„ë‹¨í•œ counter ë²„íŠ¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°

â†’ +, -, on/off ê¸°ëŠ¥ì„ ê°€ì§„ ë²„íŠ¼ë“¤ì„ êµ¬í˜„í•´ì•¼í•œë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, TDD ë¥¼ ì ìš©í•´ë³¸ë‹¤.

â†’ TDDì˜ ì§„í–‰ ìˆœì„œëŠ” ë°˜ë“œì‹œ [í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±] â†’ [êµ¬í˜„] ì„ì„ ìœ ì˜í•œë‹¤.

> ### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
> í…ŒìŠ¤íŠ¸ ì½”ë“œ

```jsx
// App.test.js

import { fireEvent, render, screen } from '@testing-library/react';
import App from './App';

test('The counter starts at 0', () => {
render(<App />); // App ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (root ì»´í¬ë„ŒíŠ¸ ë Œë”ë§)

// screen objectë¥¼ ì´ìš©í•´ì„œ ì›í•˜ëŠ” elementì— ì ‘ê·¼ (idë¡œ ì ‘ê·¼)
const counterElement = screen.getByTestId('counter');

// idê°€ counterì¸ elementì˜ í…ìŠ¤íŠ¸ê°€ 0ì¸ì§€ í…ŒìŠ¤íŠ¸
expect(counterElement).toHaveTextContent(0);
});

test('minus button has correct text', () => {
render(<App />);
const minusButtonElement = screen.getByTestId('minus-button');
expect(minusButtonElement).toHaveTextContent('-'); // minusButtonElement ìš”ì†Œê°€ '-' ì´ë¼ëŠ” text ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ê°€?
});

test('plus button has correct text', () => {
render(<App />);
const plusButtonElement = screen.getByTestId('plus-button');
expect(plusButtonElement).toHaveTextContent('+'); // plusButtonElement ìš”ì†Œê°€ '+' ì´ë¼ëŠ” text ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ê°€?
});

// ------ (+) Button ìš”ì†Œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ------
test('When the + button is pressed, the counter changes to 1', () => {
render(<App />);

// screen objectë¥¼ ì´ìš©í•´ì„œ ì›í•˜ëŠ” ìš”ì†Œì— ì ‘ê·¼ (ì ‘ê·¼ ì‹œ, Idë¡œ ì ‘ê·¼)
const buttonElement = screen.getByTestId('plus-button');

// click plus button
// fireEvent : DOM ì— ëŒ€í•œ ì´ë²¤íŠ¸ ì†ì„±ë“¤ì„ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ
fireEvent.click(buttonElement);

// ì¹´ìš´í„°ê°€ 0ì—ì„œ +1 ë¡œ ë³€í™”í•˜ì—¬ ìµœì¢… counter ê°’ì´ 1ì´ ë©ë‹ˆë‹¤.
const counterElement = screen.getByTestId('counter');

expect(counterElement).toHaveTextContent(1);
});

// ------ (-) Button ìš”ì†Œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ------
test('When the - button is pressed, the counter changes to -1', () => {
render(<App />);

const buttonElement = screen.getByTestId('minus-button');

// click minus button
// buttonElement ìš”ì†Œì— í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ
fireEvent.click(buttonElement);

const counterElement = screen.getByTestId('counter');
expect(counterElement).toHaveTextContent(-1);
});
```

> ### UI í™”ë©´
![image](https://user-images.githubusercontent.com/53039583/210679504-f48763a4-9f16-470f-9c89-2b72ac68b07b.png)
> ### Dom Element ì½”ë“œ

    
  ```jsx
  // App.js (ë©”ì¸ ì»´í¬ë„ŒíŠ¸)
  
  import { useState } from 'react';
  import styled from 'styled-components';
  import Button from './components/Button';
  
  const DivContainer = styled.div`
    display: flex;
    justify-content: center;
    background-color: #282c34;
    height: 100%;
    flex-direction: column;
    align-items: center;
  `;
  
  const DivHeader = styled.div`
    color: red;
  `;
  
  const DivMain = styled.div`
    display: flex;
    justify-content: space-around;
    flex-direction: column;
    align-items: center;
  `;
  
  const DivPlusMinusButtonWrapper = styled.div`
    display: block;
  `;
  
  function App() {
    const [counter, setCounter] = useState(0);
  
    const onIncrease = () => setCounter(counter + 1);
    const onDecrease = () => setCounter(counter - 1);
  
    return (
      <DivContainer>
        <header>
          <DivHeader>
            <h3 data-testid='counter'>{counter}</h3>
          </DivHeader>
        </header>
        <main>
          <DivMain>
            <DivPlusMinusButtonWrapper>
              <Button
                testid='minus-button'
                content='-'
                onClick={() => onDecrease()}
              />
              <Button
                testid='plus-button'
                content='+'
                onClick={() => onIncrease()}
              />
            </DivPlusMinusButtonWrapper>
            <Button
              testid='onOff-button'
              content='on/off'
              onClick={console.log('ìŠ¤ìœ„ì¹˜ ì‘ë™')}
            />
          </DivMain>
        </main>
      </DivContainer>
    );
  }
  
  export default App;
  ```
## (ì‹¤ìŠµ2) TDD ë¥¼ ì ìš©í•˜ì—¬ Dom Element ìš”ì†Œì˜ Style ì†ì„±ê°’ Test í•´ë³´ê¸°

â†’ + ë²„íŠ¼, - ë²„íŠ¼, on/off ë²„íŠ¼ ê°ê°ì˜ `background Color` style ì†ì„± ê°’ì„ í…ŒìŠ¤íŠ¸ í•´ë³¸ë‹¤.

â†’ TDDì˜ ì§„í–‰ ìˆœì„œëŠ” ë°˜ë“œì‹œ **[í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±] â†’ [êµ¬í˜„]** ì„ì„ ìœ ì˜í•œë‹¤.

> ### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

```jsx

// App.test.js

// on/off ìŠ¤ìœ„ì¹˜ ìƒì„±ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì‘ì„±
test('on/off button has blue color', () => {
	render(<App />);

	const buttonElement = screen.getByTestId('on/off-button');
	// button ìš”ì†Œê°€ backgroundColor: 'blue' ë¼ëŠ” ìŠ¤íƒ€ì¼ ì†ì„±ì„ ê°€ì§€ê³  ìˆëŠ”ì§€?
	expect(buttonElement).toHaveStyle(`backgroundColor: blue`);
});

test('plus button has red color', () => {
	// í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
	render(<App />);

	// [+ë²„íŠ¼] ìš”ì†Œë¥¼ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ ìƒì„±
	const plusElement = screen.getByTestId('plus-button');

	// [+ë²„íŠ¼] ìš”ì†Œì— 'backgroundColor' style ì†ì„±ì´ green ì¸ì§€?
	expect(plusElement).toHaveStyle(`backgroundColor: green`);
});

test('minus button has red color', () => {
	render(<App />);
	// [-ë²„íŠ¼] ìš”ì†Œë¥¼ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ ìƒì„±
	const minusElement = screen.getByTestId('minus-button');

	// [+ë²„íŠ¼] ìš”ì†Œì— 'backgroundColor' style ì†ì„±ì´ red ì¸ì§€?
	expect(minusElement).toHaveStyle({ backgroundColor: 'white' });
});
```

> ### Dom Element ì½”ë“œ

```jsx
// App.js 

import { useState } from 'react';
import styled from 'styled-components';
import Button from './components/Button';

const DivContainer = styled.div`
	display: flex;
	justify-content: center;
	background-color: #282c34;
	height: 100%;
	flex-direction: column;
	align-items: center;
`;

const DivHeader = styled.div`
	color: red;
`;

const DivMain = styled.div`
	display: flex;
	justify-content: space-around;
	flex-direction: column;
	align-items: center;
`;

const DivPlusMinusButtonWrapper = styled.div`
	display: block;
`;

function App() {
	const [counter, setCounter] = useState(0);

	const onIncrease = () => setCounter(counter + 1);
	const onDecrease = () => setCounter(counter - 1);

	return (
		<DivContainer>
			<header>
				<DivHeader>
					<h3 data-testid='counter'>{counter}</h3>
				</DivHeader>
			</header>
			<main>
				<DivMain>
					<DivPlusMinusButtonWrapper>
						<Button
							testid='minus-button'
							content='-'
							onClick={() => onDecrease()}
							backgroundColor='white'
						/>
						<Button
							testid='plus-button'
							content='+'
							onClick={() => onIncrease()}
							backgroundColor='green'
						/>
					</DivPlusMinusButtonWrapper>
					<Button
						testid='on/off-button'
						content='on/off'
						backgroundColor='blue'
					/>
				</DivMain>
			</main>
		</DivContainer>
	);
}

export default App;
```

> ### ê²°ê³¼
![image](https://user-images.githubusercontent.com/53039583/210679639-eae115c3-3612-4a20-8dc0-c656158d06a0.png)

â†’ í…ŒìŠ¤íŠ¸ ì—ëŸ¬ê°€ ë°œìƒí•œ ì´ìœ ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ [****************- ë²„íŠ¼]**************** ìš”ì†Œì˜ `backgroundColor` style ì— ëŒ€í•œ ê¸°ëŒ“ê°’ì€ â€˜`red`â€™ ì˜€ìœ¼ë‚˜, ì‹¤ì œ ì½”ë“œì— êµ¬í˜„ëœ ê°’ì€ â€˜`white`â€™ ì´ê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
// App.js
	<Button
		testid='minus-button'
		content='-'
		onClick={() => onDecrease()}
		backgroundColor='white'
	/>
```

ë”°ë¼ì„œ, ìœ„ì˜ minus ë²„íŠ¼ ìš”ì†Œ ì½”ë“œì—ì„œ backgroundColor ì†ì„±ì„ â€˜redâ€™ ë¡œ ë°”ê¾¸ë©´, ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•œë‹¤.

![image](https://user-images.githubusercontent.com/53039583/210679649-8680b30b-7e74-44ce-8053-103c466d4d37.png)

#
## (ì‹¤ìŠµ3) TDD ë¥¼ ì ìš©í•˜ì—¬ Dom Element ìš”ì†Œì˜ Click eventë¡œ ì¸í•œ ìƒíƒœ ë³€í™” Test í•´ë³´ê¸°

â†’ on/off ë²„íŠ¼ì„ í´ë¦­ ì‹œ **+ ë²„íŠ¼**, **- ë²„íŠ¼ì˜  `disabled` ì†ì„± ê°’ì´ trueê°€ ë˜ëŠ”ì§€** í…ŒìŠ¤íŠ¸ í•´ë³¸ë‹¤.

â†’ TDDì˜ ì§„í–‰ ìˆœì„œëŠ” ë°˜ë“œì‹œ **[í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±] â†’ [êµ¬í˜„]** ì„ì„ ìœ ì˜í•œë‹¤.

> ### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

```jsx
// App.test.js

test.only('on/off ë²„íŠ¼ í´ë¦­ ì‹œ, +,- ë²„íŠ¼ì„ disabled ì²˜ë¦¬', () => {
	render(<App />);

	// on/off ë²„íŠ¼ ìš”ì†Œ ì°¸ì¡° ë³€ìˆ˜ ìƒì„±
	const onoffElement = screen.getByTestId('on/off-button');

	// on/off ë²„íŠ¼ ìš”ì†Œ í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ
	fireEvent.click(onoffElement);

	// +,- ë²„íŠ¼ ìš”ì†Œ ì°¸ì¡° ë³€ìˆ˜ ìƒì„±
	const plusElement = screen.getByTestId('plus-button');
	const minusElement = screen.getByTestId('minus-button');

	expect(plusElement).toBeDisabled(); // +ë²„íŠ¼ì´ disabled ì²˜ë¦¬ ë˜ì—ˆëŠ”ì§€?
	expect(minusElement).toBeDisabled(); // -ë²„íŠ¼ì´ disabled ì²˜ë¦¬ ë˜ì—ˆëŠ”ì§€?
```


> ### Dom Element ì½”ë“œ

- `disabled` ë¼ëŠ” state ë¥¼ í†µí•´ +,- ë²„íŠ¼ì˜ disabled ì†ì„±ê°’ì„ ê´€ë¦¬í•œë‹¤.
- `disabled` state ë³€ê²½ì€ on/off ë²„íŠ¼ì˜ onClick ì†ì„±ì„ í†µí•´ `updateDisabled()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ë¤„ì§„ë‹¤.
    
    ```jsx
    // App.js
    
    import { useState } from 'react';
    import styled from 'styled-components';
    import Button from './components/Button';
    
    const DivContainer = styled.div`
    	display: flex;
    	justify-content: center;
    	background-color: #282c34;
    	height: 100%;
    	flex-direction: column;
    	align-items: center;
    `;
    
    const DivHeader = styled.div`
    	color: red;
    `;
    
    const DivMain = styled.div`
    	display: flex;
    	justify-content: space-around;
    	flex-direction: column;
    	align-items: center;
    `;
    
    const DivPlusMinusButtonWrapper = styled.div`
    	display: block;
    `;
    
    function App() {
    	const [counter, setCounter] = useState(0);
    	const [disabled, setDisabled] = useState(false);
    
    	const onIncrease = () => setCounter(counter + 1);
    	const onDecrease = () => setCounter(counter - 1);
    	const updateDisabled = (value) => {
    		setDisabled(value);
    	};
    
    	return (
    		<DivContainer>
    			<header>
    				<DivHeader>
    					<h3 data-testid='counter'>{counter}</h3>
    				</DivHeader>
    			</header>
    			<main>
    				<DivMain>
    					<DivPlusMinusButtonWrapper>
    						<Button
    							testid='minus-button'
    							content='-'
    							onClick={() => onDecrease()}
    							backgroundColor={!disabled ? 'red' : 'lightgray'}
    							disabled={disabled}
    						/>
    						<Button
    							testid='plus-button'
    							content='+'
    							onClick={() => onIncrease()}
    							backgroundColor={!disabled ? 'green' : 'lightgray'}
    							disabled={disabled}
    						/>
    					</DivPlusMinusButtonWrapper>
    					<Button
    						testid='on/off-button'
    						content='on/off'
    						backgroundColor='blue'
    						onClick={() => updateDisabled(!disabled)}
    					/>
    				</DivMain>
    			</main>
    		</DivContainer>
    	);
    }
    
    export default App;
    ```
    

> ### ê²°ê³¼

![image](https://user-images.githubusercontent.com/53039583/210679663-f2766de5-15ca-49b9-84b4-a4f11e83af26.png)

â†’ **skipped** ë€ ?

- í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ `test.only(â€¦)` êµ¬ë¬¸ **ì™¸**ì— ëª¨ë“  ì½”ë“œë“¤
- í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ  `test.skip(â€¦)` êµ¬ë¬¸ì˜ ì½”ë“œë“¤

## (ì‹¤ìŠµ4) ì¢€ ë” ë³µì¡í•œ ì•±ì„ TDD ë°©ì‹ìœ¼ë¡œ ê°œë°œí•˜ê¸°

> ### ëª©ì 

â†’ ë³´ë‹¤ ë” ë‹¤ì–‘í•œ **DOM** **Element** í…ŒìŠ¤íŠ¸ 

â†’ **MSW**(Mock Service Worker)ì„ ì´ìš©í•œ **ë°±ì—”ë“œ ì„œë²„ í†µì‹  í…ŒìŠ¤íŠ¸**

> ### ì»¨ì…‰

- í•´ì™¸ì—¬í–‰ íŒ¨í‚¤ì§€ ì£¼ë¬¸ ì‚¬ì´íŠ¸

> ### ì£¼ìš” ê¸°ëŠ¥

- ë„¤ ê°€ì§€ ë‚˜ë¼ì— ëŒ€í•œ ì—¬í–‰ ìƒí’ˆ ì„ íƒ ê¸°ëŠ¥ (image, inputNumber)
- ì—¬í–‰ ì˜µì…˜ ê¸°ëŠ¥ (checkbox)
- ì´ ê¸ˆì•¡ ê³„ì‚° ê¸°ëŠ¥ (ì—¬í–‰ ìƒí’ˆ + ì˜µì…˜)
- ì£¼ë¬¸í•œ ë‚´ìš© í™•ì¸ (ìƒí’ˆ, ì˜µì…˜)
- ì£¼ë¬¸ ì™„ë£Œ ì•ˆë‚´ ë° ëˆ„ì  ì£¼ë¬¸ ì •ë³´ í…Œì´ë¸” ì œê³µ
- ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° ê¸°ëŠ¥
- ë°±ì—”ë“œ í†µì‹  ê¸°ëŠ¥ (Node.js)

> ### í”„ë¡œì„¸ìŠ¤

ìƒí’ˆ ì£¼ë¬¸ â†’ ì£¼ë¬¸ ë‚´ìš© í™•ì¸ â†’ ì£¼ë¬¸ ì™„ë£Œ ì•ˆë‚´

> ### íŒŒì¼ êµ¬ì„±

    ![image](https://user-images.githubusercontent.com/53039583/212786604-cd5247ef-5795-49de-8dd3-c1e04be03072.png)

> ### typescript + eslint + jest í™˜ê²½ êµ¬ì„±í•˜ê¸°

- í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
	- `@babel/cli`
	- `@babel/core`
	- `@types/jest`
	- `@eslint-plugin-jest-dom`
	- `@eslint-plugin-testing-library`
	- `@babel-preset-env`
	- `@babel-prest-typescript`

- `babel.config.js`
    
    ```jsx
    module.exports = {
    	presets: ['@babel/preset-env', '@babel/preset-typescript'],
    	env: {
	  test: {
	    plugins: [
	      '@babel/plugin-transform-modules-commonjs',
	      '@babel/plugin-transform-runtime'
	    ]
	  }
    	}
    };
    ```
    
- `jest.config.js`
    
    ```jsx
    /** @type {import('jest').Config} */
    const config = {
    	preset: 'ts-jest',
    	testEnvironment: 'node',
    	transform: {
          '^.+\\.ts?$': 'ts-jest'
    	},
    	transformIgnorePatterns: ['/node_modules/(?!(axios)/)']
    };
    
    module.exports = config;
    ```
    

- node_modules ë¡œë¶€í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ import ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš° ì•„ë˜ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.
    
    ```json
    // package.json
    {
      "script": {
        "test": "react-scripts test -transformIgnorePatterns \"node_modules/(?!axios)/\""
      }
    } 
    
    ```

## context API ì„ ì´ìš©í•˜ì—¬ reactì—ì„œ ì „ì—­ì ìœ¼ë¡œ stateë¥¼ ê´€ë¦¬í•˜ê¸°

> ### 1. Context íŒŒì¼ ìƒì„±

- ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í•  state ì„ ì •ì˜í•˜ëŠ” ê³³
- ì •ì˜í•œ stateì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì „ë‹¬í•´ì£¼ëŠ” `Provider` ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” ê³³
- ë³´í†µ `./src/contexts/...` ê²½ë¡œì— íŒŒì¼ì„ ìƒì„±í•œë‹¤.
    
    ```jsx
    const { createContext, useMemo, useState } = require('react');
    
    // Context API ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± 
    export const Context = createContext();
    
    // stateì„ ì œê³µí•´ì¤„ Provider ì¸ìŠ¤í„´ìŠ¤
    export const OrderContextProvider = (props) => {
    	const [state, setState] = useState(undefined); // ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©ë  state
    
    	return <Context.Provider value={state}/>
    }
    ```
    
- ë§Œì•½ ë Œë”ë§ ì„±ëŠ¥ì„ ì˜¬ë¦¬ê³  ì‹¶ë‹¤ë©´, value ë¡œ ì „ë‹¬ë˜ëŠ” state ê°’ì„ `useMemo` ë¼ëŠ” Hook í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ë‹¬í•œë‹¤.
    
    ê·¸ ì´ìœ ëŠ”, value ê°’ì´ ë°”ë€Œë©´ <Provider/> ë‚´ë¶€ì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì´ Re-rendering  ì´ ë°œìƒí•˜ëŠ”ë°, ì´ useMemoì„ ì‚¬ìš©í•˜ë©´ dependency Array ë‚´ì— ìˆëŠ” ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ Re-rendering ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì•½ê°„ì˜ ì„±ëŠ¥ í–¥ìƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤. 
    
    ```jsx
    export const OrderContextProvider = (props) => {
    	const [state, setState] = useState(undefined); // ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©ë  state
    
    // stateê°€ ë³€ê²½ ë˜ì—ˆì„ ë•Œë§Œ, useMemo {...} ë‚´ë¶€ ì½”ë“œë¥¼ ìµœì‹ í™”
    	const value = useMemo(() => {
        return [{...state}]
      }, [state]);
    
    	return <Context.Provider value={value}/>
    }
    ```

## Test ì‹œ, render ì»´í¬ë„ŒíŠ¸ì— wrapper ì»´í¬ë„ŒíŠ¸ ì ìš©í•˜ê¸°

React test ì‹œ, render ì˜ íƒ€ê²Ÿì´ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë„ ê°™ì´ rendering ë˜ì–´ì•¼ í•˜ëŠ” ìƒí™©ë“¤ì´ ì¢…ì¢… ìˆë‹¤. (ex_Context API ì„ ì‚¬ìš©í•  ë•Œ, <Provider/> ë“±) 

ì´ëŸ° ìƒí™©ì¼ ë•ŒëŠ”, `render()` Â ì»´í¬ë„ŒíŠ¸ì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ `{wrapper: ì»´í¬ë„ŒíŠ¸ëª…}` ì„ ì •ì˜í•˜ì—¬, í…ŒìŠ¤íŠ¸ ë Œë”ë§ ì‹œì—ë„ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°™ì´ renderingí•  ìˆ˜ ìˆë‹¤.

```jsx
it("it is Context API data", async () => {
	render(<Type/>, { wrapper: OrderContextProvider });
})
```

> ### ëª¨ë“  render ì»´í¬ë„ŒíŠ¸ì— wrapper ì»´í¬ë„ŒíŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•œ custom render í•¨ìˆ˜ ë§Œë“¤ê¸°

í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ë‹¤ìˆ˜ì˜ render ì»´í¬ë„ŒíŠ¸ì— ê³µí†µì ì¸ wrapper ì»´í¬ë„ŒíŠ¸ë¥¼ ì ìš©í•´ì•¼í•  ê²½ìš°, ì¼ì¼ì´ `{wrapper: ì»´í¬ë„ŒíŠ¸ëª…}` íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” í•˜ë‚˜ì˜ ì»¤ìŠ¤í…€ render í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ í›¨ì”¬ íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤.

```jsx
// src/test-utils.js

import { render } from '@testing-library/react';
import { ContextProvider } from './contexts/Context'; // Context Provider ì»´í¬ë„ŒíŠ¸

// ui : render í•˜ê³ ì í•˜ëŠ” íƒ€ê²Ÿ ì»´í¬ë„ŒíŠ¸ 
// options : wrapper ì˜µì…˜ ì™¸ ì‚¬ìš©ìê°€ ì •ì˜ í•˜ê³ ì‹¶ì€ option
const customRender = (ui, options) => render(ui, { wrapper: ContextProvider, ...options }; 

// RTL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ re-export
export * from '@testing-library/test';

// override render method (í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ì»¤ìŠ¤í…€ ë Œë” í•¨ìˆ˜ë¥¼ render ë¼ëŠ” ëª…ìœ¼ë¡œ import í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡)
export { customRender as render };
```

```jsx
// cacluate.test.js 

import { render, screen } from '../../../test-utils'; // test-utils.js ì—ì„œ import 
import userEvent from '@testing-library/user-event';
import Type from '../Type';

// ìƒí’ˆ êµ¬ë§¤ ìˆ˜ëŸ‰ì´ ì—…ë°ì´íŠ¸ ë  ë•Œ, ì´ ìƒí’ˆ í•©ê³„ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
it('update product total when products change', async () => {
	render(<Type orderType='products' />); // { wrapper: ContextProvider } ì˜µì…˜ì´ ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ì–´ rendering
	(...)
});
```
> ### ì„ íƒí•œ ì—¬í–‰ ìƒí’ˆê³¼ ì˜µì…˜ë“¤ì˜ ì´ í•©ê³„ë¥¼ ê³„ì‚° í•˜ëŠ” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°
![image](https://user-images.githubusercontent.com/53039583/216804181-26f49d8a-c1d4-4c3c-add6-02204583e98b.png)


```jsx
describe('total price of goods and options', () => {
// 1. ìµœì´ˆ ì´ í•©ê³„ëŠ” 0ì´ë¨€, ì—¬í–‰ ìƒí’ˆì„ ì„ íƒí•  ë•Œ ì´ í•©ê³„ ê°’ì„ í…ŒìŠ¤íŠ¸ 
	it('total price starts with 0 and Updating total price when adding one product', async () => {
		render(<OrderPage />);

		const total = screen.getByText('í•©ê³„:', { exact: false });
		expect(total).toHaveTextContent('0');

		const americaInput = await screen.findByRole('spinbutton', {
			name: 'America'
		}); // ë°±ì—”ë“œì—ì„œ ê°€ì ¸ì˜¨ í›„ ë³´ì—¬ì§€ëŠ” ìš”ì†Œì´ê¸° ë•Œë¬¸ì— await ì‚¬ìš©

		userEvent.clear(americaInput);
		userEvent.type(americaInput, '3');

		userEvent.clear(americaInput);
		userEvent.type(americaInput, '1');

		expect(total).toHaveTextContent('1000');
	});

// 2. ì˜µì…˜ 1ê°œë¥¼ ì¶”ê°€í•˜ì˜€ì„ ë•Œ ì´ í•©ê³„ ê³„ì‚° í…ŒìŠ¤íŠ¸
	it('Updating total price when adding one option', async () => {
		render(<OrderPage />);
		const total = screen.getByText('í•©ê³„:', { exact: false });

		const insuranceCheckbox = await screen.findByRole('checkbox', {
			name: 'Insurance'
		});

		userEvent.click(insuranceCheckbox);
		expect(total).toHaveTextContent('500');
	});

// 3. ì˜µì…˜ 1ê°œë¥¼ ì·¨ì†Œí–ˆì„ ë•Œ ì´ í•©ê³„ ê³„ì‚° í…ŒìŠ¤íŠ¸
	it('Updating total price when removing option and product', async () => {
		render(<OrderPage />);

		const total = screen.getByText('í•©ê³„:', { exact: false });

		const insuranceCheckbox = await screen.findByRole('checkbox', {
			name: 'Insurance'
		});

		userEvent.click(insuranceCheckbox);

		const americaInput = await screen.findByRole('spinbutton', {
			name: 'America'
		});

		userEvent.clear(americaInput);
		userEvent.type(americaInput, '3');

		userEvent.clear(americaInput);
		userEvent.type(americaInput, '1');
		expect(total).toHaveTextContent('1500');
	});
});
```
#
> ### ì„ íƒí•œ ì—¬í–‰ìƒí’ˆë“¤ê³¼ ì˜µì…˜ ë‚´ì—­ë“¤ì„ ìµœì¢… í™•ì¸í•˜ëŠ” í˜ì´ì§€ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ êµ¬í˜„í•˜ê¸°

- ìµœì¢… í™•ì¸ í˜ì´ì§€ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ
    
    ```jsx
    // src/pages/SummaryPage/tests/SummaryPage.test.js
    
    import { render, screen } from 'src/test-utils';
    import SummaryPage from '../SummaryPage';
    
    it('checkbox and button', () => {
    	render(<SummaryPage />);
    
    // <Input type="checkbox" name="ì£¼ë¬¸í•˜ë ¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì…¨ë‚˜ìš”?"/> ì´ë¼ëŠ” Element ìš”ì†Œ
    	const checkbox = screen.getByRole('checkbox', {
    		name: 'ì£¼ë¬¸í•˜ë ¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì…¨ë‚˜ìš”?'
    	});
    
    	expect(checkbox.checked).toEqual(false); // ìµœì´ˆ ë Œë”ë§ ì‹œ, ì²´í¬ë°•ìŠ¤ ê°’ì€ false ì´ì–´ì•¼í•¨.
    
    // <button name="ì£¼ë¬¸ í™•ì¸"/> ì´ë¼ëŠ” Element ìš”ì†Œ
    	const confirmButton = screen.getByRole('button', {
    		name: 'ì£¼ë¬¸ í™•ì¸'
    	});
    	expect(confirmButton.disabled).toBeTruthy(); // ìµœì´ˆ ë Œë”ë§ ì‹œ, ì²´í¬ë°•ìŠ¤ ê°’ì€ false ì´ì–´ì•¼í•¨.
    });
    ```
    

- ìƒí’ˆ ì£¼ë¬¸ â†’ ìµœì¢… í™•ì¸ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ
    
    ```jsx
    // src/App.test.js
    
    import { render, screen } from '@testing-library/react';
    import userEvent from '@testing-library/user-event';
    import App from './App';
    
    test('From order to order completion', async () => {
    	render(<App />);
    
    	////////////////// [ì£¼ë¬¸ í˜ì´ì§€] //////////////////
    
    	// 'ë¯¸êµ­' ìƒí’ˆ ì„ íƒ ìˆ˜ëŸ‰ Input Element
    	const americaInput = await screen.findByRole('spinbutton', {
    		name: 'America'
    	});

    
    	userEvent.clear(americaInput);
    	userEvent.type(americaInput, '2'); // ë¯¸êµ­ ìƒí’ˆ ìˆ˜ëŸ‰ Input ìš”ì†Œì— value: '2' ì„ ì…ë ¥
    
      // 'ì˜êµ­' ìƒí’ˆ ì„ íƒ ìˆ˜ëŸ‰ Input Element
    	const englandInput = await screen.findByRole('spinbutton', {
    		name: 'England'
    	});

    
    	userEvent.clear(englandInput);
    	userEvent.type(englandInput, '3'); // ì˜êµ­ ìƒí’ˆ ìˆ˜ëŸ‰ Input ìš”ì†Œì— value: '3' ì„ ì…ë ¥
    
    	// 'ë³´í—˜' ì˜µì…˜ ì„ íƒ Checkbox Element
    	const insuranceCheckbox = await screen.findByRole('checkbox', {
    		name: 'Insurance'
    	});

    
    	// ì²´í¬ë°•ìŠ¤ ìš”ì†Œì— ì²´í¬ ì´ë²¤íŠ¸ ë°œìƒ
    	userEvent.click(insuranceCheckbox);
    
    	const orderButton = screen.getByRole('button', {
    		name: 'ì£¼ë¬¸í•˜ê¸°'
    	});
    
    	// [ì£¼ë¬¸í•˜ê¸°] ë²„íŠ¼ í´ë¦­
    	userEvent.click(orderButton);
    
    	////////////////// [ì£¼ë¬¸ í™•ì¸ í˜ì´ì§€] //////////////////
    	const summaryHeading = screen.getByRole('heading', { // <h$ name="ì£¼ë¬¸ í™•ì¸"></h$> ì´ë¼ëŠ” Element ìš”ì†Œ
    		name: 'ì£¼ë¬¸ í™•ì¸'
    	});
    	expect(summaryHeading).toBeInTheDocument(); // <h$ name="ì£¼ë¬¸ í™•ì¸"></h$> ì´ë¼ëŠ” íƒœê·¸ê°€ document ì— ì¡´ì¬í•˜ëŠ”ê°€?
    
    	const productHeading = screen.getByRole('heading', {  // <h$ name="ì—¬í–‰ ìƒí’ˆ: 5000"></h$> ì´ë¼ëŠ” Element ìš”ì†Œ
    		//
    		name: 'ì—¬í–‰ ìƒí’ˆ: 5000'
    	});
    	expect(productHeading).toBeInTheDocument(); // <h$ name="ì—¬í–‰ ìƒí’ˆ: 5000"></h$> ì´ë¼ëŠ” íƒœê·¸ê°€ document ì— ì¡´ì¬í•˜ëŠ”ê°€? (Refer: 8~20 line)
    
    	const optionsHeading = screen.getByRole('heading', { // <h$ name="ì˜µì…˜: 500"></h$> ì´ë¼ëŠ” Element ìš”ì†Œ
    		name: 'ì˜µì…˜: 500'
    	});
    	expect(optionsHeading).toBeInTheDocument(); // <h$ name="ì˜µì…˜: 500"></h$> ì´ë¼ëŠ” íƒœê·¸ê°€ document ì— ì¡´ì¬í•˜ëŠ”ê°€? (Refer: 22~27 line)
    
    	expect(screen.getByText('2 America')).toBeInTheDocument(); // document ì•ˆì— '2 America' ë¼ëŠ” í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ê°€?
    	expect(screen.getByText('3 England')).toBeInTheDocument(); // document ì•ˆì— '3 England' ë¼ëŠ” í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ê°€?
    	expect(screen.getByText('Insurance')).toBeInTheDocument(); // document ì•ˆì— 'Insurance' ë¼ëŠ” í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ê°€?
    
    	// <input type='checkbox' name="ì£¼ë¬¸í•˜ë ¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì…¨ë‚˜ìš”?"/> Element ìš”ì†Œ
    	const confirmCheckbox = screen.getByRole('checkbox', {
    		name: 'ì£¼ë¬¸í•˜ë ¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì…¨ë‚˜ìš”?'
    	});
    
    	userEvent.click(confirmCheckbox); // ì²´í¬ë°•ìŠ¤ í´ë¦­
    
    	// <button name="ì£¼ë¬¸ í™•ì¸"/> Element ìš”ì†Œ
    	const confirmOrderButton = screen.getByRole('button', {
    		name: 'ì£¼ë¬¸ í™•ì¸'
    	});
    	userEvent.click(confirmOrderButton); // ë²„íŠ¼ í´ë¦­
    });
    ```

# âš ï¸ Test Errors

## Context API ì— ëŒ€í•œ Test Error ë°œìƒ ì›ì¸

ì•„ë˜ì˜ ì—ëŸ¬ ì›ì¸ì€ ì‹¤ì œ <Type/> ì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•  ë•Œ Context Provider ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì ¸ìˆëŠ” ìƒíƒœë¡œ ë Œë”ë§ ë˜ì§€ë§Œ, í…ŒìŠ¤íŠ¸ í•  ë•ŒëŠ” `render(<Type *orderType*='products' />);` ì½”ë“œë¡œ ì‘ì„±í•˜ì—¬ Provider ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì§€ ì•Šì€ ìƒíƒœë¡œ ë Œë”ë§ ë˜ì–´, context state ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

![image](https://user-images.githubusercontent.com/53039583/216755337-d24afb8b-f757-4c24-a5d5-a81f7acd7de9.png)

ë”°ë¼ì„œ, í•´ë‹¹ ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ `render()` ë©”ì„œë“œì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ `{wrapper: <Context Providerëª…>}` ì„ ì •ì˜í•˜ì—¬, í…ŒìŠ¤íŠ¸ ë Œë”ë§ ì‹œì—ë„ Context ì˜ Provider ì»´í¬ë„ŒíŠ¸ê°€ ê°ì‹¸ì§ˆ ìˆ˜ ìˆë„ë¡ í•˜ë©´ ëœë‹¤.


#
# ì°¸ì¡°

## ğŸ” Javascript ì˜ Array.from(Map object)

 ìœ ì‚¬ ë°°ì—´ ê°ì²´(array-like object)ë‚˜ ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´(iterable object)ë¥¼ ì–•ê²Œ ë³µì‚¬í•´ ìƒˆë¡œìš´`Array`Â ê°ì²´ë¥¼ ë§Œë“ ë‹¤.

```jsx
console.log(Array.from('foo'));
// Expected output: Array ["f", "o", "o"]

console.log(Array.from([1, 2, 3], x => x + x));
// Expected output: Array [2, 4, 6]

const mapObejct = new Map([['name', 'lee'], ['name', 'kim']]);
console.log(Array.from(mapObject);
// Expected output: [['name', 'lee'], ['name', 'kim']]
```

## ğŸ” Javascript ì˜ Map

- Map ê°ì²´ëŠ” [key, value] í˜•íƒœì˜ ê°’ì„ ê°€ì§€ëŠ” ê°ì²´ì´ë‹¤.
- keyëŠ” Map ê°ì²´ì—ì„œ ê³ ìœ í•´ì•¼ í•˜ë©°, valueëŠ” ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤.
- Map ì€ key ê°€ ìˆëŠ” data ë¥¼ ì €ì¥í•œë‹¤ëŠ” ì ì—ì„œ Objectì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ë‹¤ì–‘í•œ ìë£Œí˜•ì„ í—ˆìš©í•œë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆë‹¤.

### Mapì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ìƒí™©

- ê°ì²´ì˜ propertyë¥¼ ìì£¼ ë³€ê²½í•´ì•¼í•  ë•Œ ìœ ìš©í•˜ë‹¤. (ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì •ë³´ë“¤ì€ ì¼ë°˜ object ê°ì²´ì— ì €ì¥í•´ë„ ìƒê´€ì—†ë‹¤)

### ë§µì„ ìƒì„±í•˜ê¸°

```jsx
new Map()
```

### keyë¥¼ ì´ìš©í•˜ì—¬ valueë¥¼ ì €ì¥í•˜ëŠ” `set(key, value)`

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

console.log(map);  // {{'1' => 'str1'}, {'name' => 'Lee'}}
```

### keyì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë°˜í™˜í•˜ëŠ” `get(key)`

- `key`ì— ëŒ€í•œ valueê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´,  `undefined` ë¥¼ return í•œë‹¤.

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

console.log(map.get('name')); // 'Lee'
```

### keyê°€ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ bool íƒ€ì…ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” `has(key)`

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

console.log(map.has('1')); // true
console.log(map.has('2')); // false
```

### keyì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ì‚­ì œí•˜ëŠ” `delete(key)`

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

map.delete('name');

console.log(map);  // {{'1' => 'str1'}}
```

### Map ì•ˆì˜ ëª¨ë“  ìš”ì†Œë¥¼ ì œê±°í•˜ëŠ” `clear()`

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

map.clear();

console.log(map);  // {size: 0}
```

### Map ì•ˆì— ìˆëŠ” ìš”ì†Œ ê°œìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” `size`

```jsx
const map = new Map();

map.set('1', 'str1');
map.set('name', 'Lee');

console.log(map.size);  // 2
```

## ğŸ”  Javascript ì—ì„œ For ë¬¸ì„ ì¢€ ë” ì„¹ì‹œí•˜ê²Œ ì‚¬ìš©í•˜ê¸°

```jsx
for (const ë³€ìˆ˜ of [ë°°ì—´]) {
	// ë°˜ë³µ ì‹¤í–‰ êµ¬ë¬¸
}
```

## ğŸ”  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ change event ì˜ Type ì§€ì •í•˜ê¸°

```tsx
// Input íƒœê·¸ ìš”ì†Œì— ëŒ€í•œ onChange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œ
const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {
	setState(e.target.value);
}
```

## ğŸ” **MSW (Mock Service Worker)**

> ### ì •ì˜

Service Worker ì„ ì´ìš©í•´ ì„œë²„ë¥¼ í–¥í•œ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ëª¨ì˜ ì‘ë‹µì„ ë³´ë‚´ì£¼ëŠ” API Mocking ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

> **Service Worker** ë€?
    
  ë¸Œë¼ìš°ì €ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ UI ë¸”ë¡ ì—†ì´ ì—°ì‚°ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
        ì›¹ ì„œë¹„ìŠ¤ì™€ ë¸Œë¼ìš°ì € ë° ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì—ì„œ **í”„ë¡ì‹œ ì„œë²„ ì—­í• **ì„ í•˜ë©°, ì˜¤í”„ë¼ì¸ì—ì„œë„ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
      
  - Service Worker ì˜ ìˆ˜ëª… ì£¼ê¸°ëŠ” ì›¹í˜ì´ì§€ì™€ëŠ” ì™„ì „íˆ ë³„ê°œì´ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤. ([ì¶œì²˜](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API))

      - ë†’ì€ ë¹„ìš©ì˜ ê³„ì‚°ì„ ì²˜ë¦¬í•  ë•Œ
      - í‘¸ì‹œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•  ë•Œ
      - ë°±ê·¸ë¼ìš´ë„ ë°ì´í„° ë™ê¸°í™”
      - ë‹¤ë¥¸ ì¶œì²˜ì—ì„œì˜ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ ì‘ë‹µ
      - ìœ„ì¹˜ ì •ë³´, ìì´ë¡œ ì„¼ì„œ ë“± ê³„ì‚°ì— ë†’ì€ ë¹„ìš©ì´ ë“¤ì–´ê°€ëŠ” ë‹¤ìˆ˜ì˜ í˜ì´ì§€ì—ì„œ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ì¤‘ì•™í™”
      - ê°œë°œ ëª©ì ìœ¼ë¡œì„œ CoffeeScript, Less, CJS/AMD module ë“±ì˜ ì˜ì¡´ì„± ê´€ë¦¬ì™€ ì»´íŒŒì¼, ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ í›…
      - íŠ¹ì • URL íŒ¨í„´ì— ê¸°ë°˜í•œ ì‚¬ìš©ì ì§€ì • í…œí”Œë¦¿ ì œê³µ
      - ì„±ëŠ¥ í–¥ìƒ, ì‚¬ì§„ ì•¨ë²”ì˜ ë‹¤ìŒ ì‚¬ì§„ ëª‡ ì¥ì²˜ëŸ¼ ì‚¬ìš©ìê°€ í•„ìš”ë¡œ í•  ê²ƒìœ¼ë¡œ ìƒê°ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ pre-fetching ë“±
  - Service Worker ëŠ” IE ì™€ ê°™ì€ ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì› ë˜ì§€ ì•Šìœ¼ë©°, **HTTPS** ë³´ì•ˆ í”„ë¡œí† ì½œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. (localhost í™˜ê²½ ì œì™¸)
  <br/>
      (ë„¤íŠ¸ì›Œí¬ ì¤‘ê°„ì—ì„œ ì—°ê²°ì„ ê°€ë¡œì±„ê³  ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆê¸° ë•Œë¬¸)

> ### ì¥ì 

- ì§ì ‘ Mock Server ì„ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë„¤íŠ¸ì›Œí¬ ìˆ˜ì¤€ì—ì„œ APIë¥¼  Mocking í•  ìˆ˜ ìˆë‹¤.
- Mcoking í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë…¸ë“œ(node.js) í™˜ê²½, ê°œë°œ ë° ë””ë²„ê¹…ì„ ìœ„í•œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì • ì—†ì´ Mocking ì´ í•„ìš”í•œ í™˜ê²½ì—ì„œë§Œ  MSW ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•´ API Mockingì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

> ### ì‘ë™ ì›ë¦¬
  ![image](https://user-images.githubusercontent.com/53039583/212527387-ff907e2f-6c67-461d-80d9-fc44e1c2279b.png)

1. ë¸Œë¼ìš°ì €ê°€ Service Worker ì— ìš”ì²­ì„ ë³´ëƒ„
2. Service Worker ê°€ í•´ë‹¹ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ë³µì‚¬í•¨
3. ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³ , MSW ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•¸ë“¤ëŸ¬ì™€ ë§¤ì¹­ì‹œí‚´
4. MSWê°€ ë“±ë¡ëœ í•¸ë“¤ëŸ¬ì—ì„œ ëª¨ì˜ ì‘ë‹µ(mocked response)ë¥¼ Service Workerì—ê²Œ ì „ë‹¬í•¨
5. ë§ˆì§€ë§‰ìœ¼ë¡œ Service Worker ê°€ ëª¨ì˜ ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì—ê²Œ ì „ë‹¬í•¨

ì°¸ê³ ë¡œ, Service Worker ëŠ” **ë¸Œë¼ìš°ì € í™˜ê²½**ì—ì„œë§Œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤. 
node í™˜ê²½ì—ì„œëŠ” node-request-interceptor ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ ë„¤ì´í‹°ë¸Œ(http, https, XMLHttpRequest) ëª¨ë“ˆì„ í™•ì¥í•´ì„œ requestë¥¼ ì²˜ë¦¬ í•´ì•¼í•œë‹¤.

> ### MSW ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

- npm ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°
    
    ```bash
    $npm install msw --save-dev  
    ```
    
- yarn ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°
    
    ```bash
    $yarn add msw --dev  
    ```
    

> ### MSW ì‚¬ìš© í™˜ê²½ ì…‹íŒ…í•˜ê¸°

1. **ë¸Œë¼ìš°ì €ì— ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡**
â†’ ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” MSWë¥¼ ì„œë¹„ìŠ¤ ì›Œì»¤ì— ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•œë°, ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ì„ ìœ„í•œ íŒŒì¼ì´ public í´ë”ì— ì¶”ê°€ëœë‹¤.
`public/` í´ë”ëŠ” ì£¼ë¡œ í”„ë¡œì íŠ¸ì˜ ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ë‹´ëŠ” í´ë”ì´ë‹¤. 

    create-react-app, next.js ì— ê¸°ë³¸ì ìœ¼ë¡œ ì„¸íŒ…ì´ ë˜ì–´ ìˆì§€ë§Œ, ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì˜ ê²½ìš° public ë””ë ‰í† ë¦¬ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆëŠ”ë°, [í•´ë‹¹ ë§í¬](https://mswjs.io/docs/getting-started/integrate/browser#where-is-my-public-directory)ì—ì„œ ì°¸ê³  ê°€ëŠ¥í•˜ë‹¤.
    
    ```bash
    $npx msw init public/ --save
    ```
    

1. Worker ì„¤ì •
    
    â†’ `src/mocks/browser.js` íŒŒì¼ì„ ìƒì„±í•´ì„œ worker ì„¤ì •ì„ í•´ì•¼í•œë‹¤.
    
    ```bash
    $touch src/mocks/browser.js
    ```
    
    ìƒì„±í•œ `browser.js`íŒŒì¼ì—ì„œ worker ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìš”ì²­ í•¸ë“¤ëŸ¬ë¥¼ ì •ì˜í•œë‹¤.
    
    ```jsx
    // src/mocks/browser.js
    import { setupWorker } from 'msw'
    import { handlers } from './handlers'
    
    // ì´ê²ƒì€ ì£¼ì–´ì§„ ìš”ì²­ í•¸ë“¤ëŸ¬ë“¤ë¡œ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ êµ¬ì„±í•œë‹¤.
    export const worker = setupWorker(...handlers)
    ```
    

1. Worker ì‹¤í–‰
    
    â†’ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ì— ì›Œì»¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.
    
    ```jsx
    // src/index.js
    import React from 'react'
    import ReactDOM from 'react-dom'
    import App from './App'
    
    if (process.env.NODE_ENV === 'development') {
    	const { worker } = require('./mocks/browser');
    	worker.start();
    };
    
    ReactDOM.render(<App />, document.getElementById('root'));
    
    ```
    

1. Worker ì ìš© í™•ì¸
    
    â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹œì‘í•˜ê³ , ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ë©”ì„¸ì§€ê°€ ëœ¨ë©´ Mockingì´ í™œì„±í™” ëœ ê²ƒì´ë‹¤.
    
    ```bash
    [MSW] Mocking enabled.
    ```
    
    ì´ì œ ê°œë°œ ì„œë²„ì—ì„œ ì•±ì„ ì‹¤í–‰í•˜ë©´, ì‹¤ì œ ì„œë²„ê°€ ì•„ë‹Œ MSW ì—ì„œ ì‘ë‹µì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ëœë‹¤.
    

> ### MSW ìš”ì²­ í•¸ë“¤ëŸ¬ ì‘ì„±

MSW í™˜ê²½ ì„¸íŒ…ì´ ì™„ë£Œë˜ë©´, ì„œë²„ ëŒ€ì‹  MSW ì—ì„œ ëª¨ì˜ ì‘ë‹µì„ ì¤„ ìˆ˜ ìˆë„ë¡ ìš”ì²­ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•œë‹¤. HTTP requestê°€ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ, ë‚´ê°€ ì›í•˜ëŠ” ëŒ€ë¡œ ì„ì˜ ì‘ë‹µ(Mocked response) ì„ í•´ì¤„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì½”ë“œì´ë‹¤.

ì½”ë“œëŠ” ë˜ë„ë¡ì´ë©´ `mocks` í´ë”ì— ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤. `src/mocks/handlers.js` ì— ìš”ì²­ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•œë‹¤.

```jsx
// src/mocks/handlers.js

import { rest } from 'msw';

const posts = ["post1", "post2", "post3"];

export const handlers = [

	// post ëª©ë¡ ì¡°íšŒ
	rest.get("/posts", (req, res, ctx) => {
		return res(ctx.status(200), ctx.json(posts));
	});

	// post ì¶”ê°€
	rest.post("/posts", (req, res, ctx) => {
		posts.push(req.body);
		return res(ctx.status(201));
	});
];
```

REST APIë¥¼ Mocking í•˜ê¸° ìœ„í•´ MSWì˜ `rest`  ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

post ëª©ë¡ì„ ì¡°íšŒí•˜ê¸° ìœ„í•œ `GET /posts` ëŠ” Arrayì— ë‹´ê¸´ postë¥¼ response í•´ì£¼ê³ , ìƒˆë¡œìš´ post ë“±ë¡ì„ ìœ„í•œ `POST /posts` ëŠ” request bodyë¡œ ë„˜ì–´ì˜¨ postë¥¼ Arrayì— ì¶”ê°€í•œë‹¤.

> ### Service Worker  ìš”ì²­ í…ŒìŠ¤íŠ¸

ì´ì œ `fetch()` í•¨ìˆ˜ë¡œ `GET /posts` requestë¥¼ ë³´ë‚´ë³´ë„ë¡ í•œë‹¤. ì‹¤ì œ ì„œë²„ê°€ ì•„ë‹Œ MSWì—ì„œ mocked responseì„ ë³´ë‚´ì¤„ ê²ƒì´ë‹¤.

- Request
    
    ```jsx
    fetch("/posts")
    	.then((response) => response.json())
    	.then((data) => console.log(data));
    ```
    
- Response
    
    ```bash
    [MSW] 18:04:24 GET /posts (200 OK)
    ["post1", "post2", "post3"]
    ```
    

> ### MSW ì ìš© ì˜ˆì‹œ

ê·¸ë ‡ë‹¤ë©´ ëª¨ì˜ ì‘ë‹µì„ ì œê³µí•˜ëŠ” msw í•¸ë“¤ëŸ¬ëŠ” ê³¼ì—° ì–´ë–»ê²Œ ìƒê²¼ì„ê¹Œ? Â [ê³µì‹ ë„í](https://mswjs.io/docs/#how-does-it-work)ì˜ ì˜ˆì‹œë¥¼ í†µí•´ì„œ ë¨¼ì € ì•Œì•„ë³´ì.

Mock Service Workerë¥¼ ì‚¬ìš©í•˜ë©´ ì„ ì–¸ì Â [ìš”ì²­ í•¸ë“¤ëŸ¬](https://mswjs.io/docs/basics/request-handler)Â (declarative request handler)ë¥¼ ì‚¬ìš©í•˜ì—¬ URL, RegExp ë˜ëŠ” ì‚¬ìš©ì ì§€ì • ê¸°ì¤€ì— ë”°ë¼ ìš”ì²­ì„ ê°€ë¡œì±Œ ìˆ˜ ìˆê²Œ í•˜ê³ , ëª¨ì˜ ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ì‘ë‹µ í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤.

ë‹¤ìŒì€ POST ë©”ì„œë“œì˜Â `/login`Â ìš”ì²­ì„ ëª¨í‚¹í•˜ëŠ” msw íŒŒì¼ì˜ˆì‹œë‹¤.

```jsx
// src/mocks.js
import { setupWorker, rest } from 'msw'

const worker = setupWorker(
  rest.post('/login', (req, res, ctx) => {
    const isAuthenticated = sessionStorage.getItem('username')

    if (!isAuthenticated) {
      return res(
        ctx.status(403),
        ctx.json({
          errorMessage: 'Not authenticated',
        }),
      )
    }

    return res(
      ctx.json({
        firstName: 'John',
      }),
    )
  }),
)

// Register the Service Worker and enable the mocking
worker.start()
```

- HTTP POST ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´Â `rest.post`Â í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
- í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì˜ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ”Â `'/login'`Â ë¼ëŠ” ìš”ì²­ ê²½ë¡œë¥¼ ë„£ì—ˆê³ , ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ”Â [response resolver](https://mswjs.io/docs/getting-started/mocks/rest-api#response-resolver)ë¼ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ë„£ì—ˆë‹¤.
- Response resolverì—ëŠ” ì„¸ ê°€ì§€ ì¸ìë¥¼ ë°›ëŠ”ë‹¤: req, res, ctx
    - `req`: ë§¤ì¹­ë˜ëŠ” ìš”ì²­ì— ëŒ€í•œ ì •ë³´
    - `res`: ëª¨ì˜ ì‘ë‹µì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìœ í‹¸ë¦¬í‹°
    - `ctx`: ëª¨ì˜ ì‘ë‹µì˜ HTTP ìƒíƒœ ì½”ë“œ, í—¤ë”, ë°”ë”” ë“±ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤
- ìœ„Â `req`,Â `res`,Â `ctx`ë¥¼ ì‚¬ìš©í•´ì„œ ì›í•˜ëŠ” ì¡°ê±´ì— ë”°ë¼ ëª¨ì˜ ì‘ë‹µì„ ì‘ì„±í•œë‹¤.
    - ì‚¬ìš©ìê°€ ê²€ì¦ë˜ì—ˆëŠ”ì§€Â `isAuthenticated`Â ì—¬ë¶€ë¥¼ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì˜ username ê°’ìœ¼ë¡œ íŒë³„í•œë‹¤
    - ë§Œì•½ ê²€ì¦ëœ ì‚¬ìš©ìë¼ë©´Â `firstName: 'John'`Â ì´ë¼ëŠ” ê°’ì„ ë¦¬í„´í•œë‹¤
    - ë§Œì•½ ê²€ì¦ë˜ì§€ ì•Šì•˜ë‹¤ë©´, 403 ì‘ë‹µê³¼ í•¨ê»˜Â `errorMessage: 'Not authenticated'`Â ì´ë¼ëŠ” ê°’ì„ ë¦¬í„´í•œë‹¤.
- ìµœì¢…ì ìœ¼ë¡œ, ì‘ì„±í•œ workerë¥¼Â `worker.start()`ë¡œ ë“±ë¡í•œë‹¤

ë¸Œë¼ìš°ì €ë³„ë¡œ ì„¸íŒ… ì ˆì°¨ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—Â [ê³µì‹ ë„í - Integrate](https://mswjs.io/docs/getting-started/integrate)Â ë‚´ìš©ì„ í™•ì¸í•´ì„œ ì„¸íŒ…í•˜ë©´ ëœë‹¤. í•´ë‹¹ ê¸€ì—ì„œëŠ” 'ë¸Œë¼ìš°ì €' ê¸°ì¤€ìœ¼ë¡œ mswë¥¼ ì ìš©í• ê²ƒì´ë‹¤.

## MSW ë‹¤ì–‘í•œ ì‚¬ë¡€

ê¸°ë³¸ì ì¸ ë‚´ìš© ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ì—ì„œÂ [mswë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•](https://mswjs.io/docs/recipes)ë“¤ì´ ìˆë‹¤. ì´ì¤‘, ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„¤ ê°€ì§€ ì‚¬ë¡€ë¥¼ ì •ë¦¬í•´ë³´ì•˜ë‹¤.

> ### Cookies

ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ`fetch`ì—ì„œ Set-Cookie ë° Set-Cookie2 í—¤ë”ë¥¼ ì„¤ì •í•  ìˆ˜ ì—†ë‹¤.

ê·¸ëŸ¬ë‚˜ Mock Service WorkerëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ, ë³´ì•ˆ ìœ„ë°˜ ì—†ì´ ì‘ë‹µìœ¼ë¡œë¶€í„° Mocked ì¿ í‚¤ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.Â `document.cookie`Â ë¬¸ìì—´ì— ì§€ì •ëœ ì¿ í‚¤ë¥¼ ì§ì ‘ ì„¤ì •í•˜ëŠ”Â `ctx.cookie()`Â ì‘ë‹µ ë³€í™˜ê¸° í•¨ìˆ˜(response transformer function)ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

**ì˜ˆì‹œ**

```jsx
import { setupWorker, rest } from 'msw'

const worker = setupWorker(
  rest.post('/login', (req, res, ctx) => {
    return res(
      // Calling `ctx.cookie()` sets given cookies
      // on `document.cookie` directly.
      ctx.cookie('auth-token', 'abc-123'),
    )
  }),
)

worker.start()
```

> ### Query parameters

ì¸í„°ì…‰íŠ¸ëœ ìš”ì²­ì˜ ì¿¼ë¦¬ ë§¤ê°œ ë³€ìˆ˜ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´Â `req.url`Â ì¸ìŠ¤í„´ìŠ¤ì—ì„œÂ `searchParams`Â ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì´ ì†ì„±ì˜ ê°’ì€ ëª¨ë“  ì¿¼ë¦¬ ë§¤ê°œ ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ”Â [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)Â ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, MSWë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ë”°ë¼ ë‹¤ë¥¸ ì‘ë‹µì„ ì¤˜ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë°, ì´ë•Œ í•¸ë“¤ëŸ¬ì—ì„œÂ `req`Â ê°ì²´ë¥¼ í†µí•´ íŒŒë¼ë¯¸í„°ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

```jsx
import { setupWorker, rest } from 'msw'
const worker = setupWorker(
  rest.get('/products', (req, res, ctx) => {
    const productId = req.url.searchParams.get('id')
    return res(
      ctx.json({
        productId,
      }),
    )
  }),
)
worker.start()
```

**Request**

`GET fetch('/products?id=123')`

**Response**`200 OK`

**Body**

```bash
{
  // Where '123' is the value of `req.url.searchParams.get('id')`
  // parsed from the request URL.
  "productId": "123"
}
```

ë” ìì„¸í•œ ì„¤ëª…ì€Â [ë§í¬](https://mswjs.io/docs/recipes/query-parameters)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> ### Response patching

Response patchingì€ ëª¨ì˜ ì‘ë‹µ(mocked response)ì´ ì‹¤ì œ ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê²Œí•œë‹¤. ì´ ê¸°ë²•ì€ í•¸ë“¤ëŸ¬ì—ì„œ ì‹¤ì œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ í›„ ë°›ì€ ë°ì´í„°ì— ë””ë²„ê¹… ë“±ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì„ì˜ë¡œ ë§ë¶™ì´ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•œë‹¤.

ì•„ë˜ëŠ”Â [Github API v3](https://docs.github.com/en/rest)ì—ì„œ ì‘ë‹µì„ íŒ¨ì¹­í•˜ëŠ” ì˜ˆì‹œì´ë‹¤:

```jsx
import { setupWorker, rest } from 'msw'

const worker = setupWorker(
  rest.get('https://api.github.com/users/:username', async (req, res, ctx) => {
    // Perform an original request to the intercepted request URL
    const originalResponse = await ctx.fetch(req)
    const originalResponseData = await originalResponse.json()

    return res(
      ctx.json({
        location: originalResponseData.location,
        firstName: 'Not the real first name',
      }),
    )
  }),
)

worker.start()
```

**Request**

`GET 'https://api.github.com/users/octocat'`

**Response**`200 OK`

**Body**

```bash
{
  // Resolved from the original response
  "location": "San Francisco",
  "firstName": "Not the real first name"
}
```

ë” ìì„¸í•œ ì„¤ëª…ì€Â [ë§í¬](https://mswjs.io/docs/recipes/response-patching)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> ### Mocking error responses

mswë¡œ ìš”ì²­ì— ëŒ€í•œ ì—ëŸ¬ ì‘ë‹µì„ mocking í•  ìˆ˜ë„ ìˆë‹¤. ì˜¤ë¥˜ ì‘ë‹µì„ ì˜ˆì™¸ê°€ ì•„ë‹Œ ì‹¤ì œ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨, í‘œì¤€ì„ ì¤€ìˆ˜í•˜ê³  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ ìœ íš¨í•œ ì˜¤ë¥˜ ì‘ë‹µì„ ìˆ˜ì‹ í•˜ê³  ì²˜ë¦¬í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ëŠ” ë¡œê·¸ì¸Â `POST`ìš”ì²­ì—ì„œ ì—ëŸ¬ ì‘ë‹µì„ mocking í•˜ëŠ” ì˜ˆì œì´ë‹¤:

```jsx
import { setupWorker, rest } from 'msw'

const worker = setupWorker(
  rest.post('/login', async (req, res, ctx) => {
    const { username } = await req.json()

    return res(
      // Send a valid HTTP status code
      ctx.status(403),
      // And a response body, if necessary
      ctx.json({
        errorMessage: `User '${username}' not found`,
      }),
    )
  }),
)

worker.start()
```

**Request**

`POST '/login'`

**Body**

```bash
{
  "username": "admin"
}
```

**Response**

`403 Forbidden`

**Body**

```bash
{
  "errorMessage": "User 'admin' not found"
}
```

ë” ìì„¸í•œ ì„¤ëª…ì€Â [ë§í¬](https://mswjs.io/docs/recipes/mocking-error-responses)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
